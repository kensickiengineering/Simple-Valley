<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Account | Simple Valley</title>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        .account-container { max-width: 800px; margin: 0 auto; position: relative; }
        #account-view { display: none; }
        #user-profile { background: var(--background-light); padding: 24px; border-radius: var(--border-radius); }
        .order-history-section h2 { text-align: center; margin-bottom: 32px; margin-top: 40px;}
        .orders-list { display: flex; flex-direction: column; gap: 16px; }
        .order-item { border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; box-shadow: var(--shadow); }
        .order-summary { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color); flex-wrap: wrap; gap: 8px;}
        #logout-button { background-color: #e29040; color: #ffffff; margin-top: 2rem; }

        /* --- New Settings Dropdown Styles --- */
        .settings-menu { position: absolute; top: 0; right: 0; }
        .settings-btn { background: none; border: 1px solid var(--border-color); padding: 8px 12px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .settings-dropdown { display: none; position: absolute; top: 110%; right: 0; background: var(--white); border-radius: var(--border-radius); box-shadow: var(--shadow); border: 1px solid var(--border-color); z-index: 10; width: 200px; overflow: hidden; }
        .settings-dropdown.active { display: block; }
        .settings-dropdown button { display: block; width: 100%; text-align: left; padding: 12px 16px; background: none; border: none; border-bottom: 1px solid var(--border-color); cursor: pointer; }
        .settings-dropdown button:hover { background-color: var(--background-light); }
        .settings-dropdown button:last-child { border-bottom: none; }
        #delete-account-btn { color: #ef4444; }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container nav-container">
            <div class="logo-brand">
                <a href="home.html" class="logo-circle" aria-label="Home"><img src="assets/img/RealLogo.png" alt="SV Logo"></a>
                <a href="home.html" class="brand-name">Simple Valley</a>
            </div>
            <nav class="main-nav">
                <ul class="nav-links">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="ourstory.html">Our Story</a></li>
                    <li><a href="ingredients.html">Ingredients</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
            </nav>
            <div class="nav-meta">
                <a id="account-link" href="account.html" class="icon-btn" title="Account"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></a>
                <a href="#" class="icon-btn cart-btn" title="Cart"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg><span class="cart-count" id="cartCount">0</span></a>
            </div>
            <button class="mobile-nav-toggle" aria-label="Toggle navigation"><span></span><span></span><span></span></button>
        </div>
    </header>

    <main class="container account-section">
        <div class="account-container">
            <h1 class="section-title">Your Account</h1>
            <div id="loading-state"><p>Loading your account...</p></div>

            <div id="account-view">
                <div class="settings-menu">
                    <button class="settings-btn" id="settings-menu-btn">
                        Settings
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </button>
                    <div class="settings-dropdown" id="settings-dropdown-content">
                        <button id="change-email-btn">Change Email</button>
                        <button id="reset-password-btn">Change Password</button>
                        <button id="delete-account-btn">Delete Account</button>
                    </div>
                </div>

                <div id="user-profile" style="margin-bottom: 2rem;"></div>
                <div class="order-history-section">
                    <h2>Your Order History</h2>
                    <div id="order-history-container"></div>
                </div>
                <button id="logout-button" class="button">Log Out</button>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        </footer>

    <div class="cart-overlay" id="cart-overlay"></div>
    <div class="cart-sidebar" id="cart-sidebar">
        </div>
    <script src="assets/js/app.js"></script>
</body>
</html>