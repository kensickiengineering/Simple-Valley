<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Account | Simple Valley</title>
    <script src="https://js.stripe.com/v3/"></script>
<script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
<div class="promo-banner">
    <p>ALL PRE-ORDERS SHIP ON NOVEMBER 14. SECURE YOUR BARS TODAY FOR MAXIMAL SAVINGS!</p>
</div>
    <header class="site-header">
        <div class="container nav-container">
            <div class="logo-brand">
                <a href="home.html" class="logo-circle" aria-label="Home">
                    <img src="assets/img/RealLogo.png" alt="SP Logo">
                </a>
                <a href="home.html" class="brand-name">Simple Valley</a>
            </div>
            <nav class="main-nav">
                <ul class="nav-links">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="ourstory.html">Our Story</a></li>
                    <li><a href="ingredients.html">Ingredients</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
            </nav>
            <div class="nav-meta">
                <a id="account-link" href="account.html" class="icon-btn" title="Account" aria-label="Account">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
    </a>

                <a href="#" class="icon-btn cart-btn" title="Cart" aria-label="Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
            </div>
            <button class="mobile-nav-toggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

<main class="container account-section">
    <h1 class="section-title">Your Account</h1>

    <div class="account-form-container">
        <div id="loading-state" style="text-align: center; padding: 2rem 0;">
            <p>Loading Your Account...</p>
        </div>

        <div id="account-view" style="display: none;">
            <div id="user-profile" style="margin-bottom: 2rem;">
                </div>
            <p>From here, you will soon be able to manage your newsletter subscriptions, view past orders, and manage product subscriptions.</p>
            <button id="logout-button" class="button">Log Out</button>
        </div>
    </div>
</main>

<footer class="site-footer">
    <div class="container footer-grid">
        <div class="footer-col">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="ourstory.html">Our Story</a></li>
                <li><a href="ingredients.html">Ingredients</a></li>
                <li><a href="contact.html">Contact Us</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>Company</h4>
            <ul>
                <li><a href="privacy.html">Privacy Policy</a></li>
                <li><a href="terms.html">Terms of Service</a></li>
                <li><a href="refund.html">Refund Policy</a></li>
            </ul>
        </div>
        <div class="footer-col subscribe-col">
            <h4>Subscribe to our Newsletter</h4>
            <form class="subscribe-form">
                <input type="email" placeholder="Your email" aria-label="Email" required>
                <button type="submit" class="button">Subscribe</button>
            </form>
            <div class="social-links">
                <a href="https://www.instagram.com/simplevalleybar?igsh=aTQyenNmenR6eHR5&utm_source=qr" aria-label="Instagram" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                </a>
                <a href="https://www.facebook.com/share/15iTsHbZvu/?mibextid=wwXIfr" aria-label="Facebook" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                </a>
                <a href="https://www.tiktok.com/@simplevalleybar?_t=ZT-90TAgAyyiYh&_r=1" aria-label="TikTok" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a4 4 0 1 1-4-4v12a4 4 0 1 1-4-4"></path></svg>
                </a>
                <a href="https://www.youtube.com/channel/UC1gO-5Nv1vqAFyLkLshncaQ" aria-label="YouTube" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2A29 29 0 0 0 23 11.75a29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
                </a>
                <a href="https://x.com/simplevalleybar?s=21" aria-label="X" target="_blank" rel="noopener noreferrer">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </a>
            </div>
        </div>
    </div>
    <div class="container">
        <p class="copyright-disclaimer">These statements have not been evaluated by the Food and Drug Administration. This product is not intended to diagnose, treat, cure, or prevent any disease.</p>
        <p class="copyright">Â© <span id="year"></span> Simple Valley. All Rights Reserved.</p>
    </div>
</footer>

    <!-- Cart Sidebar -->
    <div class="cart-overlay" id="cart-overlay"></div>
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="close-btn" id="close-cart-btn">&times;</button>
        </div>
        <div class="cart-body" id="cart-body">
            <!-- Cart items will be injected here by JavaScript -->
        </div>
        <div class="cart-footer">
            <div class="cart-subtotal">
                <span>Subtotal</span>
                <span id="cart-subtotal">$0.00</span>
            </div>
            <button class="button checkout-btn" id="checkout-button">Proceed to Checkout</button>
        </div>
    </div>

    <script src="assets/js/app.js"></script>
<script src="assets/js/app.js"></script> <script>
    // This is the page-specific logic for account.html
    let auth0Client = null;

    const configureClient = async () => {
      auth0Client = await auth0.createAuth0Client({
        domain: 'YOUR_AUTH0_DOMAIN',     // IMPORTANT: Replace with your value
        clientId: 'YOUR_AUTH0_CLIENT_ID' // IMPORTANT: Replace with your value
      });
    };

    const updateAccountUI = async () => {
        const isAuthenticated = await auth0Client.isAuthenticated();

        if (!isAuthenticated) {
            // If the user isn't logged in, trigger the login flow.
            // After login, they will be returned to this account page.
            await auth0Client.loginWithRedirect({
                authorizationParams: {
                    redirect_uri: window.location.href
                }
            });
        } else {
            // If the user is logged in, show their info.
            const user = await auth0Client.getUser();
            const userProfileDiv = document.getElementById('user-profile');
            
            userProfileDiv.innerHTML = `
                <h3>Welcome Back!</h3>
                <p><strong>Email:</strong> ${user.email}</p>
                <p>Your details will now be pre-filled for a faster checkout experience.</p>
            `;

            // Show the account content and hide the loading message
            document.getElementById('loading-state').style.display = 'none';
            document.getElementById('account-view').style.display = 'block';

            // Set up the logout button's functionality
            document.getElementById('logout-button').addEventListener('click', () => {
                auth0Client.logout({
                    logoutParams: {
                        returnTo: window.location.origin // Return to the homepage after logout
                    }
                });
            });
        }
    };

    // Main function to run when the page loads
    window.addEventListener('load', async () => {
        await configureClient();
        await updateAccountUI();
    });
</script>
</body>
</html>

